<div map-lazy-load="https://maps.google.com/maps/api/js">
  <!-- map-lazy-load-params="https://maps.googleapis.com/maps/api/js?key=AIzaSyDGEtCoDKLLD83seTo6KaXv5T31giUwHDo"-->
  <ng-map center="current-location" zoom="15" default-style="false" style="width:100%; height:100%; position: absolute;">
    <marker data-ng-repeat="challenge in ctrl.challenges"
        title="{{challenge.id}}"
        position="{{challenge.pos}}"
        icon="http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld={{!challenge.visited ? '?|FFFF00': 'X|0000FF'}}">
    </marker>
    <shape data-ng-repeat="challenge in ctrl.challenges | filter: { visited: false }"
        id="{{challenge.id}}"
        name="circle"
        stroke-color="#FF0000"
        stroke-opacity="0.5"
        stroke-weight="1"
        center="{{challenge.pos}}"
        radius="15"
        editable="false" >
    </shape>
    <marker data-ng-if="ctrl.currentPos"
        position="[{{ctrl.currentPos.lat}}, {{ctrl.currentPos.lng}}]"
        animation="Animation.BOUNCE"
        centered="true"
        icon="http://chart.apis.google.com/chart?chst=d_map_pin_icon&chld=star|FF0000">
    </marker>
  </ng-map>
  {{ctrl.currentPos}}
  {{ctrl.map.getCenter()}}
</div>